# ============================================================================
# Zygo Backend Environment Variables
# ============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env files to version control
# ============================================================================

# ----------------------------------------------------------------------------
# CORE APPLICATION
# ----------------------------------------------------------------------------

# Environment: development | staging | production | test
NODE_ENV=development

# Domain Structure:
#   - getzygo.com: Public-facing (landing page, auth pages, public docs)
#   - zygo.tech: Application (API, tenant app, admin panel)
#   - zygo.cloud: Infrastructure (nameservers, deployed nodes)

# Application URLs (zygo.tech domain)
APP_NAME=Zygo
APP_URL=https://app.zygo.tech
ADMIN_URL=https://admin.zygo.tech
API_URL=https://api.zygo.tech

# Public URLs (getzygo.com domain)
PUBLIC_URL=https://getzygo.com
DOCS_URL=https://docs.getzygo.com

# Server Configuration
PORT=3000
HOST=0.0.0.0

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_PRETTY=false

# CORS (comma-separated origins)
# Include both zygo.tech (app) and getzygo.com (public) domains
CORS_ORIGINS=https://app.zygo.tech,https://admin.zygo.tech,https://getzygo.com,https://docs.getzygo.com
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ----------------------------------------------------------------------------
# DATABASE (PostgreSQL / Supabase)
# ----------------------------------------------------------------------------

# Primary Database Connection
DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT].supabase.co:5432/postgres?sslmode=require
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_SSL=true

# Supabase Configuration
SUPABASE_URL=https://[PROJECT].supabase.co
SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_ROLE_KEY=eyJ...

# Redis (for caching and sessions)
REDIS_URL=redis://localhost:6379
REDIS_TLS=false
REDIS_KEY_PREFIX=zygo:

# ----------------------------------------------------------------------------
# AUTHENTICATION
# ----------------------------------------------------------------------------

# JWT Configuration (min 32 characters for secret)
JWT_SECRET=your-super-secret-jwt-key-min-32-chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRES=15m
JWT_REFRESH_TOKEN_EXPIRES=7d

# Session
SESSION_SECRET=your-session-secret-min-32-chars
SESSION_COOKIE_NAME=zygo_session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_SAME_SITE=strict

# OAuth: Google
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# OAuth: GitHub
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# SAML (Enterprise SSO)
SAML_ENTITY_ID=https://api.zygo.tech/saml
SAML_CALLBACK_URL=https://api.zygo.tech/auth/saml/callback
SAML_CERTIFICATE_PATH=
SAML_PRIVATE_KEY_PATH=

# MFA
MFA_ISSUER=Zygo
MFA_BACKUP_CODES_COUNT=10

# ----------------------------------------------------------------------------
# CLOUD PROVIDERS
# ----------------------------------------------------------------------------

# DigitalOcean
DIGITALOCEAN_TOKEN=
DIGITALOCEAN_SPACES_KEY=
DIGITALOCEAN_SPACES_SECRET=
DIGITALOCEAN_SPACES_REGION=nyc3
DIGITALOCEAN_SPACES_BUCKET=zygo-files

# AWS
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=zygo-files

# GCP
GCP_PROJECT_ID=
GCP_CREDENTIALS_JSON=
GCP_STORAGE_BUCKET=

# Azure
AZURE_SUBSCRIPTION_ID=
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
AZURE_STORAGE_ACCOUNT=
AZURE_STORAGE_KEY=

# Hetzner
HETZNER_API_TOKEN=

# Linode
LINODE_API_TOKEN=

# Vultr
VULTR_API_KEY=

# ----------------------------------------------------------------------------
# EMAIL
# ----------------------------------------------------------------------------

# SMTP Configuration
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=apikey
SMTP_PASSWORD=

# Email Addresses
EMAIL_FROM_ADDRESS=noreply@zygo.tech
EMAIL_FROM_NAME=Zygo
EMAIL_REPLY_TO=support@zygo.tech

# SendGrid (alternative to SMTP)
SENDGRID_API_KEY=

# ----------------------------------------------------------------------------
# FILE STORAGE
# ----------------------------------------------------------------------------

# Storage Driver: local | s3 | gcs | azure
STORAGE_DRIVER=s3
STORAGE_LOCAL_PATH=/var/zygo/uploads
STORAGE_MAX_FILE_SIZE=104857600

# S3-Compatible Storage
S3_ENDPOINT=https://nyc3.digitaloceanspaces.com
S3_BUCKET=zygo-files
S3_REGION=nyc3
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_ACL=private

# CDN
CDN_ENABLED=false
CDN_URL=https://cdn.zygo.tech

# ----------------------------------------------------------------------------
# PAYMENTS (PayPal & Revolut)
# ----------------------------------------------------------------------------

# PayPal Configuration
PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=
PAYPAL_MODE=sandbox
PAYPAL_WEBHOOK_ID=

# PayPal Plan IDs (Subscriptions)
PAYPAL_PLAN_STARTER_MONTHLY=P-...
PAYPAL_PLAN_STARTER_YEARLY=P-...
PAYPAL_PLAN_PRO_MONTHLY=P-...
PAYPAL_PLAN_PRO_YEARLY=P-...
PAYPAL_PLAN_ENTERPRISE_MONTHLY=P-...
PAYPAL_PLAN_ENTERPRISE_YEARLY=P-...

# Revolut Configuration (Card Payments)
REVOLUT_API_KEY=
REVOLUT_MERCHANT_ID=
REVOLUT_MODE=sandbox
REVOLUT_WEBHOOK_SECRET=

# Tax Configuration
TAX_ENABLED=false
TAX_BEHAVIOR=exclusive

# ----------------------------------------------------------------------------
# MONITORING & OBSERVABILITY
# ----------------------------------------------------------------------------

# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# DataDog (APM)
DD_API_KEY=
DD_APP_KEY=
DD_SITE=datadoghq.com
DD_SERVICE=zygo-api
DD_ENV=development

# Prometheus (Metrics)
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# Health Checks
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=5000

# ----------------------------------------------------------------------------
# AI / ML
# ----------------------------------------------------------------------------

# OpenAI
OPENAI_API_KEY=sk-...
OPENAI_ORGANIZATION=
OPENAI_DEFAULT_MODEL=gpt-4-turbo

# Anthropic
ANTHROPIC_API_KEY=sk-ant-...
ANTHROPIC_DEFAULT_MODEL=claude-3-opus-20240229

# Cohere
COHERE_API_KEY=

# Hugging Face
HUGGINGFACE_API_KEY=

# Vector Database (Pinecone)
PINECONE_API_KEY=
PINECONE_ENVIRONMENT=us-east-1
PINECONE_INDEX=zygo-embeddings

# AI Rate Limits
AI_RATE_LIMIT_RPM=60
AI_MAX_TOKENS_PER_REQUEST=4096

# ----------------------------------------------------------------------------
# FEATURE FLAGS
# ----------------------------------------------------------------------------

# LaunchDarkly
LAUNCHDARKLY_SDK_KEY=

# Internal Feature Flags (fallback)
FEATURE_AI_WORKFLOWS=true
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_CUSTOM_BRANDING=false
FEATURE_SSO=false
FEATURE_MULTI_CLOUD=false
FEATURE_BETA_FEATURES=false

# ----------------------------------------------------------------------------
# ENCRYPTION & SECURITY
# ----------------------------------------------------------------------------

# Encryption (32-byte hex key for AES-256)
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef
ENCRYPTION_KEY_ID=key_2024_01

# API Key Signing
API_KEY_SIGNING_SECRET=your-api-key-signing-secret

# Webhook Signing
WEBHOOK_SIGNING_SECRET=your-webhook-signing-secret

# Audit Log Integrity
AUDIT_HMAC_SECRET=your-audit-hmac-secret

# ----------------------------------------------------------------------------
# QUEUES & BACKGROUND JOBS
# ----------------------------------------------------------------------------

# Queue Redis Connection
QUEUE_REDIS_URL=redis://localhost:6379/1
QUEUE_PREFIX=zygo:queue:

# Job Configuration
JOB_RETRY_ATTEMPTS=3
JOB_RETRY_DELAY=5000
JOB_TIMEOUT=300000

# Queue Concurrency
QUEUE_EMAIL_CONCURRENCY=5
QUEUE_WEBHOOK_CONCURRENCY=10
QUEUE_WORKFLOW_CONCURRENCY=3

# ----------------------------------------------------------------------------
# DEVELOPMENT ONLY
# ----------------------------------------------------------------------------

# Dev Mode Settings (DO NOT USE IN PRODUCTION)
DEV_DISABLE_AUTH=false
DEV_MOCK_EXTERNAL_APIS=false
DEV_SEED_DATABASE=false
DEV_DEFAULT_TENANT_SLUG=demo

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
